{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { environment } from \"src/environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/service/status-code.service\";\nimport * as i4 from \"src/app/service/toast.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\n\nfunction CreateChallengeComponent_option_16_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r4.username);\n  }\n}\n\nfunction CreateChallengeComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 10);\n    i0.ɵɵtemplate(1, CreateChallengeComponent_option_16_div_1_Template, 2, 1, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", user_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r4.id);\n  }\n}\n\nfunction CreateChallengeComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1, \"No matching users\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateChallengeComponent_div_18_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 10)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const i_r9 = ctx.index;\n    i0.ɵɵproperty(\"value\", i_r9 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r9 + 1);\n  }\n}\n\nfunction CreateChallengeComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\")(2, \"label\");\n    i0.ɵɵtext(3, \"How Many Pets In This Battle?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"select\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function CreateChallengeComponent_div_18_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.numberOfPets = $event;\n    });\n    i0.ɵɵelement(5, \"option\", 4);\n    i0.ɵɵtemplate(6, CreateChallengeComponent_div_18_option_6_Template, 3, 2, \"option\", 5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.numberOfPets);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.counter(ctx_r2.maxNumberOfPets));\n  }\n}\n\nfunction CreateChallengeComponent_div_23_h4_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r12.challengerUser.username, \"'s Pets:\");\n  }\n}\n\nfunction CreateChallengeComponent_div_23_div_4_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 22);\n  }\n\n  if (rf & 2) {\n    const pet_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", pet_r14.image.imageURL, i0.ɵɵsanitizeUrl)(\"alt\", pet_r14.name);\n  }\n}\n\nconst _c0 = function () {\n  return [\"black\", \"petcenter\", \"medium-pet-background\"];\n};\n\nfunction CreateChallengeComponent_div_23_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 19);\n    i0.ɵɵtemplate(2, CreateChallengeComponent_div_23_div_4_img_2_Template, 1, 2, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h6\", 21);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const pet_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction0(4, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", pet_r14.image);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Lvl \", pet_r14.petLevel, \" \", pet_r14.name, \"\");\n  }\n}\n\nfunction CreateChallengeComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CreateChallengeComponent_div_23_h4_1_Template, 2, 1, \"h4\", 13);\n    i0.ɵɵelementStart(2, \"div\", 14)(3, \"div\", 15);\n    i0.ɵɵtemplate(4, CreateChallengeComponent_div_23_div_4_Template, 6, 5, \"div\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.challengerPets.length);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.challengerPets);\n  }\n}\n\nconst _c1 = function (a1, a2) {\n  return {\n    btn: true,\n    \"btn-light-fothu bg-light-fothu text-white disabled\": a1,\n    \"btn-dark-fothu bg-dark-fothu text-white black-glow\": a2\n  };\n};\n\nexport let CreateChallengeComponent = /*#__PURE__*/(() => {\n  class CreateChallengeComponent {\n    constructor(userService, router, statusCodeService, toastService) {\n      this.userService = userService;\n      this.router = router;\n      this.statusCodeService = statusCodeService;\n      this.toastService = toastService;\n      this.userList = [];\n      this.challengeUserId = 0;\n      this.filterString = \"\";\n      this.filterArray = [];\n      this.challengerPets = [];\n      this.numberOfPets = 0;\n      this.maxNumberOfPets = 0;\n    }\n\n    getAllUsersBesideLoggedInUser() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let userListJSON = yield fetch(`${environment.fothuZoneEC2Link}/users/availableChallengeUsers/userId/${this.userService.currentUser.id}`);\n        this.userList = yield userListJSON.json();\n        this.filterArray = this.userList;\n      });\n    }\n\n    createNewChallengeRequest() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let challengeRequestJSON = yield fetch(`${environment.fothuZoneEC2Link}/challengeRequests/new/challengerId/${this.userService.currentUser.id}/opponentId/${this.challengeUserId}/numberOfPets/${this.numberOfPets}`, {\n          method: \"POST\"\n        });\n\n        if (this.statusCodeService.checkSuccessStatus(challengeRequestJSON)) {\n          this.toastService.successfulRequestToast(\"Challenge Successfully Created!\");\n          this.router.navigate([\"/FothuPets\"]);\n        } else {\n          this.toastService.unableToSendRequestToast(\"Unable To Create Challenge. Try Again!\");\n        }\n      });\n    }\n\n    filterUserList() {\n      this.filterArray = this.userList;\n      this.filterArray = this.filterArray.filter(user => {\n        return user.username.toLowerCase().includes(this.filterString.toLowerCase());\n      });\n    }\n\n    getPetsForChallenger(id) {\n      return __awaiter(this, void 0, void 0, function* () {\n        let challengerJSON = yield fetch(`${environment.fothuZoneEC2Link}/users/id/${id}`);\n        let challenger = yield challengerJSON.json();\n        this.challengerUser = challenger;\n        this.challengerPets = challenger.pets;\n\n        if (this.challengerPets.length >= this.userService.currentUser.pets.length) {\n          this.maxNumberOfPets = this.userService.currentUser.pets.length;\n        } else {\n          this.maxNumberOfPets = this.challengerPets.length;\n        }\n      });\n    }\n\n    counter(i) {\n      return new Array(i);\n    }\n\n    ngOnInit() {\n      this.getAllUsersBesideLoggedInUser();\n    }\n\n  }\n\n  CreateChallengeComponent.ɵfac = function CreateChallengeComponent_Factory(t) {\n    return new (t || CreateChallengeComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.StatusCodeService), i0.ɵɵdirectiveInject(i4.ToastService));\n  };\n\n  CreateChallengeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateChallengeComponent,\n    selectors: [[\"app-create-challenge\"]],\n    decls: 24,\n    vars: 11,\n    consts: [[1, \"w-50\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Search..\", \"name\", \"userSearch\", 3, \"ngModel\", \"ngModelChange\", \"keyup\"], [\"id\", \"userSelect\", \"name\", \"userId\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"0\", \"selected\", \"\", \"disabled\", \"\", \"hidden\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-danger\", \"disabled\", \"\", 4, \"ngIf\"], [\"class\", \"form-group\", 4, \"ngIf\"], [3, \"ngClass\", \"click\"], [4, \"ngIf\"], [3, \"value\"], [\"disabled\", \"\", 1, \"text-danger\"], [\"id\", \"numberOfPetsSelect\", \"name\", \"petNumber\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"text-left\", 4, \"ngIf\"], [1, \"container-fluid\"], [1, \"row\"], [\"class\", \"col-12 col-sm-6 col-md-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-left\"], [1, \"col-12\", \"col-sm-6\", \"col-md-4\"], [3, \"ngClass\"], [\"class\", \"medium-pet-image\", 3, \"src\", \"alt\", 4, \"ngIf\"], [1, \"text-center\", \"medium-pet-image\"], [1, \"medium-pet-image\", 3, \"src\", \"alt\"]],\n    template: function CreateChallengeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Challenge Another Player\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(2, \"br\")(3, \"br\");\n        i0.ɵɵelementStart(4, \"form\", 0)(5, \"div\", 1)(6, \"div\")(7, \"label\");\n        i0.ɵɵtext(8, \"Choose A Challenger\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\")(10, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateChallengeComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.filterString = $event;\n        })(\"keyup\", function CreateChallengeComponent_Template_input_keyup_10_listener() {\n          return ctx.filterUserList();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(11, \"br\")(12, \"br\");\n        i0.ɵɵelementStart(13, \"select\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateChallengeComponent_Template_select_ngModelChange_13_listener($event) {\n          return ctx.challengeUserId = $event;\n        })(\"change\", function CreateChallengeComponent_Template_select_change_13_listener() {\n          return ctx.getPetsForChallenger(ctx.challengeUserId);\n        });\n        i0.ɵɵelementStart(14, \"option\", 4);\n        i0.ɵɵtext(15, \"Challengers\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, CreateChallengeComponent_option_16_Template, 2, 2, \"option\", 5);\n        i0.ɵɵtemplate(17, CreateChallengeComponent_option_17_Template, 2, 0, \"option\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(18, CreateChallengeComponent_div_18_Template, 7, 2, \"div\", 7);\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelementStart(20, \"a\", 8);\n        i0.ɵɵlistener(\"click\", function CreateChallengeComponent_Template_a_click_20_listener() {\n          return ctx.createNewChallengeRequest();\n        });\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(22, \"br\");\n        i0.ɵɵtemplate(23, CreateChallengeComponent_div_23_Template, 5, 2, \"div\", 9);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.filterString);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.challengeUserId);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filterArray);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.filterArray.length == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.challengeUserId && ctx.challengerPets.length != 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c1, ctx.challengerPets.length == 0 || !ctx.challengeUserId, ctx.challengerPets.length && ctx.challengeUserId && ctx.numberOfPets));\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(!ctx.challengeUserId ? \"Select A Challenger\" : ctx.challengerPets.length == 0 ? \"Challenger Has No Pets\" : \"Submit Challenge!\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.challengeUserId);\n      }\n    },\n    directives: [i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i5.SelectControlValueAccessor, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i6.NgForOf, i6.NgIf, i6.NgClass],\n    styles: [\"\"]\n  });\n  return CreateChallengeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}