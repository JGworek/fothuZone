{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst _c0 = [\"canvas\"];\nexport let SalfaggeVisualizerComponent = /*#__PURE__*/(() => {\n  class SalfaggeVisualizerComponent {\n    constructor() {\n      this.pitchKey = \"\";\n      this.octaveKey = \"\";\n      this.AudioContext = window.AudioContext;\n    }\n\n    handleKeyUpEvent(event) {\n      console.log(event.key);\n\n      if (event.key === \"a\") {\n        this.pitchKey = \"a\";\n      }\n\n      if (event.key === \"s\") {\n        this.pitchKey = \"s\";\n      }\n\n      if (event.key === \"d\") {\n        this.pitchKey = \"d\";\n      }\n\n      if (event.key === \"1\") {\n        this.octaveKey = \"1\";\n      }\n\n      if (this.pitchKey === \"a\" && this.octaveKey === \"1\") {\n        this.createSquare('blue', 100, 100, 20, 20);\n        this.oscillator.frequency.value = 440.00;\n        this.audioContext.resume();\n      }\n\n      if (this.pitchKey === \"s\" && this.octaveKey === \"1\") {\n        this.createSquare('green', 100, 100, 20, 20);\n        this.oscillator.frequency.value = 493.88;\n        this.audioContext.resume();\n      }\n\n      if (this.pitchKey === \"d\" && this.octaveKey === \"1\") {\n        this.createSquare('yellow', 100, 100, 20, 20);\n        this.oscillator.frequency.value = 554.37;\n        this.audioContext.resume();\n      }\n    }\n\n    handleKeyDownEvent(event) {\n      if (event.key === \"a\") {\n        this.pitchKey = \"\";\n      }\n\n      if (event.key === \"s\") {\n        this.pitchKey = \"\";\n      }\n\n      if (event.key === \"d\") {\n        this.pitchKey = \"\";\n      }\n\n      if (event.key === \"1\") {\n        this.octaveKey = \"\";\n      }\n\n      if (!this.octaveKey && !this.pitchKey) {\n        this.createSquare('red', 100, 100, 20, 20);\n        this.audioContext.suspend();\n      }\n    }\n\n    createSquare(fillColor, x, y, w, h) {\n      this.ctx.fillStyle = fillColor;\n      this.ctx.fillRect(x, y, w, h);\n    }\n\n    ngOnInit() {\n      this.audioContext = new this.AudioContext();\n      this.oscillator = this.audioContext.createOscillator();\n      this.ctx = this.canvas.nativeElement.getContext('2d');\n      this.createSquare('red', 100, 100, 20, 20);\n      this.oscillator.type = 'square';\n      this.oscillator.frequency.value = 440;\n      this.oscillator.connect(this.audioContext.destination);\n      this.oscillator.start();\n      this.audioContext.suspend();\n    }\n\n  }\n\n  SalfaggeVisualizerComponent.ɵfac = function SalfaggeVisualizerComponent_Factory(t) {\n    return new (t || SalfaggeVisualizerComponent)();\n  };\n\n  SalfaggeVisualizerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SalfaggeVisualizerComponent,\n    selectors: [[\"app-salfagge-visualizer\"]],\n    viewQuery: function SalfaggeVisualizerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      }\n    },\n    hostBindings: function SalfaggeVisualizerComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown\", function SalfaggeVisualizerComponent_keydown_HostBindingHandler($event) {\n          return ctx.handleKeyUpEvent($event);\n        }, false, i0.ɵɵresolveDocument)(\"keyup\", function SalfaggeVisualizerComponent_keyup_HostBindingHandler($event) {\n          return ctx.handleKeyDownEvent($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 7,\n    vars: 0,\n    consts: [[1, \"container\"], [1, \"row\", \"align-items-center\"], [1, \"col-10\", \"border\", \"border-dark-fothu\", \"align-self-center\"], [\"width\", \"600\", \"height\", \"300\"], [\"canvas\", \"\"], [1, \"col-2\", \"border\", \"border-dark-fothu\", \"align-self-center\"]],\n    template: function SalfaggeVisualizerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"canvas\", 3, 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtext(6, \" a \");\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    styles: [\"\", \"canvas[_ngcontent-%COMP%]{border-style:solid}\"]\n  });\n  return SalfaggeVisualizerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}