{
	"ast": null,
	"code": "import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/user.service\";\nimport * as i2 from \"@stomp/ng2-stompjs\";\nimport * as i3 from \"src/app/service/battle.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\n\nfunction PetsHomeComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelementStart(1, \"div\", 21);\n    i0.ɵɵelementStart(2, \"h6\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 21);\n    i0.ɵɵelementStart(5, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function PetsHomeComponent_div_38_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const currentBattle_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.battleService.getPVPBattle(currentBattle_r2.id);\n    });\n    i0.ɵɵtext(6, \"Open\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const currentBattle_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Battle vs. \", currentBattle_r2.attackingUser.id == ctx_r0.userService.currentUser.id ? currentBattle_r2.defendingUser.username : currentBattle_r2.attackingUser.username, \"\");\n  }\n}\n\nfunction PetsHomeComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelementStart(1, \"div\", 21);\n    i0.ɵɵelementStart(2, \"h6\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 21);\n    i0.ɵɵelementStart(5, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function PetsHomeComponent_div_47_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const challengeRequest_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.battleService.acceptChallengeRequest(challengeRequest_r5.id);\n    });\n    i0.ɵɵtext(6, \"Accept\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function PetsHomeComponent_div_47_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const challengeRequest_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.battleService.rejectChallengeRequest(challengeRequest_r5.id);\n    });\n    i0.ɵɵtext(8, \"Reject\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const challengeRequest_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Battle vs. \", challengeRequest_r5.attackingUser.id == ctx_r1.userService.currentUser.id ? challengeRequest_r5.defendingUser.username : challengeRequest_r5.attackingUser.username, \"\");\n  }\n}\n\nexport let PetsHomeComponent = /*#__PURE__*/(() => {\n  class PetsHomeComponent {\n    constructor(userService, RxStompService, battleService) {\n      this.userService = userService;\n      this.RxStompService = RxStompService;\n      this.battleService = battleService;\n    }\n\n    keepChallengeRequestsUpdated() {\n      this.challengeSubscription = this.RxStompService.watch(`/challengeSubscription/${this.userService.currentUser.id}`).subscribe(challengeMessage => {\n        if (challengeMessage) {\n          let convertedChallengeRequests = JSON.parse(challengeMessage.body);\n          this.battleService.challengeRequests = convertedChallengeRequests;\n        }\n      });\n    }\n\n    keepCurrentBattlesUpdated() {\n      this.battleSubscription = this.RxStompService.watch(`/currentBattlesSubscription/${this.userService.currentUser.id}`).subscribe(battleMessage => {\n        if (battleMessage) {\n          let convertedCurrentBattles = JSON.parse(battleMessage.body);\n          this.battleService.currentBattles = convertedCurrentBattles;\n        }\n      });\n    }\n\n    ngOnInit() {\n      this.keepChallengeRequestsUpdated();\n      this.keepCurrentBattlesUpdated();\n      this.battleService.getChallengeRequests();\n      this.battleService.getCurrentBattles();\n    }\n\n    ngOnDestroy() {\n      this.challengeSubscription.unsubscribe();\n      this.battleSubscription.unsubscribe();\n    }\n\n  }\n\n  PetsHomeComponent.ɵfac = function PetsHomeComponent_Factory(t) {\n    return new (t || PetsHomeComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.RxStompService), i0.ɵɵdirectiveInject(i3.BattleService));\n  };\n\n  PetsHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PetsHomeComponent,\n    selectors: [[\"app-pets-home\"]],\n    decls: 48,\n    vars: 2,\n    consts: [[1, \"border\", \"border-dark\", \"rounded\", \"center\", \"container-fluid\", \"order-0\", \"bg-dark-fothu\", \"text-white\", \"py-2\", \"m-0\"], [1, \"container-fluid\", \"p-0\", \"h-100\", \"bg-white\"], [1, \"row\", \"h-100\", \"align-items-start\", \"no-gutters\", \"father\"], [1, \"col-12\", \"col-lg-9\", \"pets-content\", \"h-75\", \"son\", \"order-1\", \"bg-white\"], [1, \"row\", \"no-gutters\", \"align-items-start\"], [1, \"col-12\", \"no-gutters\", \"pets-content\", \"text-center\"], [\"routerLink\", \"/newPet\", 1, \"btn\", \"btn-primary-fothu\", \"bg-primary-fothu\", \"text-white\"], [\"routerLink\", \"/dungeon\", 1, \"btn\", \"btn-warning-fothu\", \"bg-warning-fothu\", \"text-dark-fothu\"], [\"routerLink\", \"/challenge\", 1, \"btn\", \"btn-dark-fothu\", \"bg-dark-fothu\", \"text-white\"], [\"src\", \"https://fothuzone-pets.s3.amazonaws.com/25-06-09_03R_A.jpg\", \"alt\", \"cool eagle\", 1, \"big-pet-image\", \"m-5\"], [\"src\", \"https://fothuzone-pets.s3.amazonaws.com/single-king-penguin-on-ice-clipart-3812.jpg\", \"alt\", \"cool penguin\", 1, \"big-pet-image\", \"m-5\"], [\"src\", \"https://fothuzone-pets.s3.amazonaws.com/swimming-shark.jpg\", \"alt\", \"cool shark\", 1, \"big-pet-image\", \"m-5\"], [1, \"d-none\", \"d-lg-block\", \"col-lg-3\", \"m-0\", \"p-0\", \"order-2\", \"h-75\", \"son\", \"border\", \"border-dark\", \"rounded\", 2, \"right\", \"0\"], [1, \"row\", \"d-none\", \"d-lg-block\", \"m-0\", \"p-0\", \"h-100\", \"align-items-center\"], [1, \"d-none\", \"d-lg-block\", \"col-lg-12\", \"align-self-center\", \"border-bottom\", \"border-dark\", \"bg-light-fothu\", \"text-white\"], [1, \"center\", \"text-dark-fothu\"], [1, \"row\", \"overflow-current-battles\"], [1, \"col-12\"], [\"class\", \"row\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"col-12\", \"overflow-battle-requests\"], [1, \"col-12\", \"text-center\"], [1, \"text-dark-fothu\"], [1, \"btn\", \"btn-secondary-fothu\", \"bg-secondary-fothu\", \"text-white\", \"mx-1\", 3, \"click\"]],\n    template: function PetsHomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1, \"FothuPets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementStart(8, \"h4\");\n        i0.ɵɵtext(9, \"Things To Do:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"hr\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5);\n        i0.ɵɵelementStart(12, \"a\", 6);\n        i0.ɵɵtext(13, \"New Pet\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"a\", 7);\n        i0.ɵɵtext(15, \"Head To Mumble's Creek (ALPHA)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"a\", 8);\n        i0.ɵɵtext(17, \"Challenge Another Player\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"br\");\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelement(20, \"br\");\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelementStart(22, \"div\", 5);\n        i0.ɵɵelementStart(23, \"h6\");\n        i0.ɵɵtext(24, \"Explore dungeons and fight your friends in gripping turn based combat!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 5);\n        i0.ɵɵelement(26, \"img\", 9);\n        i0.ɵɵelement(27, \"img\", 10);\n        i0.ɵɵelement(28, \"img\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 12);\n        i0.ɵɵelementStart(30, \"div\", 13);\n        i0.ɵɵelementStart(31, \"div\", 14);\n        i0.ɵɵelement(32, \"br\");\n        i0.ɵɵelementStart(33, \"h4\", 15);\n        i0.ɵɵtext(34, \"Current Battles\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"hr\");\n        i0.ɵɵelementStart(36, \"div\", 16);\n        i0.ɵɵelementStart(37, \"div\", 17);\n        i0.ɵɵtemplate(38, PetsHomeComponent_div_38_Template, 8, 1, \"div\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 14);\n        i0.ɵɵelement(40, \"br\");\n        i0.ɵɵelementStart(41, \"h4\", 15);\n        i0.ɵɵtext(42, \"Battle Requests\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"hr\");\n        i0.ɵɵelementStart(44, \"div\", 19);\n        i0.ɵɵelementStart(45, \"div\", 20);\n        i0.ɵɵelementStart(46, \"div\", 17);\n        i0.ɵɵtemplate(47, PetsHomeComponent_div_47_Template, 10, 1, \"div\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(38);\n        i0.ɵɵproperty(\"ngForOf\", ctx.battleService.currentBattles);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngForOf\", ctx.battleService.challengeRequests);\n      }\n    },\n    directives: [i4.RouterLinkWithHref, i5.NgForOf],\n    styles: [\"\"]\n  });\n  return PetsHomeComponent;\n})();",
	"map": null,
	"metadata": {},
	"sourceType": "module"
}
